# MP4toYUV

Штука, которая сконвертирует "нормальное" видео в yuv 420, которое используется программами в этом репозитории. На самом деле, не смотря на название, конвертация происходит не только ".mp4" файлов, можно также ".avi", ".mkv" и др.

# Использование

## Рекомендация перед запуском

Часто программа не захочет работать с предложенным видео. Как вариант решить эту проблему сконвертировать видео в тот формат, с которым программа будет работать=/

Для этого нужно установить пакет `ffmpeg`. Например, для `Ubuntu 20.04`:

``` bash
> sudo apt install ffmpeg
```

Чтобы сконвертировать в тот самый формат можно выполнить эту команду:

``` bash
> ffmpeg -i INFILE -an -vcodec libx264 -crf 23 specfile.mp4
```

В данном случае нужно обратить внимание на:

- `INFILE` - это входной файл. В теории, он может быть в любом формате.

- `specfile.mp4` файл, который теперь "съест" программа.

## Компиляция

Чтобы скомпилировать:

``` bash
> javac -encoding utf-8 -cp .:./lib/jcodec-0.2.5.jar:./lib/jcodec-javase-0.2.5.jar MP4toYUV.java
```

## Пример запуска:

Программа принимает 2 аргумента. Если ввести аргументов не 2 или с ошибкой, то поведение непредсказуемо.

``` bash
> java -cp .:./lib/jcodec-0.2.5.jar:./lib/jcodec-javase-0.2.5.jar MP4toYUV specfile.mp4 out.yuv
```

где:

- Аргумент 1: `specfile.mp4` - входное видео

- Аргумент 2: `out.yuv` - выходное видео, сохранённое в yuv color space 420.

## Определённые кадры

### Первый вариант

Если вам нужны не все кадры из видео, а лишь некоторые, то можно выделить нужные с помощью утилиты `ffmpeg`:

``` bash
> ffmpeg -i video.mp4 -ss 00:00:03.255 -t 00:01:08.125 -async 1 cuttedVideo.mp4
```

Команда выше вырежет из `video.mp4` кадры, которые входят в промежуток от трёх секунд и 255 милисек до одной минуты восьми секунд и 125 милисек. Вырезанное видео сохранится в `cuttedVideo.mp4`. Дальше [это](#рекомендация-перед-запуском).

## Изменить разрешение видео

Если нужно изменить разрешение видео, то можно с помощью утилиты `ffmpeg` поменять разрешение. Например, чтобы получить *720p*:

``` bash
> ffmpeg -i video.mp4 -s 1280x720 -c:a copy video.720p.mp4
```

### Второй вариант

Поменять в программе условие. С помощью `Ctrl+F` найдите `"Если нужны определенные кадры"`. Дальше измените условие *if*

# Проблемы

- Очень медленно работает...

- Код просит, чтобы его переписали по-нормальному
